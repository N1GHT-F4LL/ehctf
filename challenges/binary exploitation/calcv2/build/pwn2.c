#include<stdio.h>
#include <stdlib.h>
#include <time.h>

void setup(){
    setvbuf(stdin, NULL, _IONBF, 0);
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stderr, NULL, _IONBF, 0);
}

int add(int num1, int num2){
    return num1 + num2;
}
int sub(int num1, int num2){
    return (num1 > num2)? (num1 - num2):(num2 - num1);
}
int mul(int num1, int num2){
    return num1 * num2;
}
int divi(int num1, int num2){
    return num1 % num2;
}
int modify_digit(int num, int index, int new_digit, int nextDigit) {
    int digits[10], num_digits = 0, new_num = 0;
    // Chuyá»ƒn Ä‘á»•i sá»‘ sang máº£ng
    while (num > 0) {
        digits[num_digits++] = num % 10;
        num /= 10;
    }
    // Sá»­a Ä‘á»•i chá»¯ sá»‘
    digits[num_digits - index] = new_digit;
    digits[num_digits - index + 1] = nextDigit;
    // Chuyá»ƒn Ä‘á»•i máº£ng sang sá»‘
    for (int i = num_digits - 1; i >= 0; i--) {
        new_num = new_num * 10 + digits[i];
    }

    return new_num;
}

void editNumber(int num1, int num2){
    unsigned int index, new_digit, stt_num, next_digit;
    puts("You want to edit number at ?");
    scanf("%d", &index);
    puts("Enter the new number to interchange:");
    scanf("%d", &new_digit);
    puts("Enter the next to new number to interchange:");
    scanf("%d", &next_digit);
    puts("what number do you want to change: ");
    scanf("%d", &stt_num);
    switch (stt_num)
    {
        case 1:{
            num1 = modify_digit(num1, index, new_digit, next_digit);
            break;
        }
        case 2:{
            num2 = modify_digit(num2, index, new_digit, next_digit);
            break;
        }
        default:{
            puts("What do you want to do ???");
            break;
        }
    }
    printf("Your number after modify: %d and %d", num1, num2);
}

int main(){
    time_t t;
    int n, choice;
    setup();
    // srand((unsigned) time(&t));
    // printf("Hello hacker. \nDo you want to hack this program?\n");
    // printf("Look good! First, Hack this time ðŸ¤–\n");
    // for(int i = 0; i < 10; i++){
    //     printf("Enter num[%d]: ", i);
    //     if(inputInt() != rand()%1337){
    //         exit(0);
    //     }
    //     printf("\n");
    // }
    // printf("Keep tracking...\n");
    int num1, num2;
    int result;
    do{

        puts("\n  ####      ##     ##        ####    ##  ##   ##         ##     ######    ####    #####           ");
        puts(" ##  ##    ####    ##       ##  ##   ##  ##   ##        ####      ##     ##  ##   ##  ##          ");
        puts(" ##       ##  ##   ##       ##       ##  ##   ##       ##  ##     ##     ##  ##   ##  ##          ");
        puts(" ##       ######   ##       ##       ##  ##   ##       ######     ##     ##  ##   #####           ");
        puts(" ##       ##  ##   ##       ##       ##  ##   ##       ##  ##     ##     ##  ##   ####            ");
        puts(" ##  ##   ##  ##   ##       ##  ##   ##  ##   ##       ##  ##     ##     ##  ##   ## ##           ");
        puts("  ####    ##  ##   ######    ####     ####    ######   ##  ##     ##      ####    ##  ##       v.1\n");
        puts("Enter 1st number: ");
        scanf("%d", &num1);
        puts("Enter 2nd number: ");
        scanf("%d", &num2);
        if(num1 <= 0 && num2 <= 0){
            printf("My calc can not perform negative number\n");
            exit(0);
        }
        puts("What do you want to perfrom?");
        scanf("%d",&choice);
        switch(choice){
            case 1: {
                result = add(num1, num2);
                break;
            }
            case 2: {
                result = sub(num1, num2);
                break;
            }
            case 3: {
                result = mul(num1, num2);
                break;
            }
            case 4: {
                result = divi(num1, num2);
                break;
            }
            case 5:{
                editNumber(num1, num2);
                break;
            }
            default:{
                puts("Don't try to hack me, Hmmm !!!\n");
                exit(0);
            }
        }
        if(choice != 5){
            if(result >= 0){
                printf("Result = %d\n", result);
            }else{
                printf("Try to hack me ??\n");
                exit(0);
            }
            if(result == 0xDEAD1337){
                puts("Loading.....");
                system("/bin/sh;");
            }
        }
    } while(choice != 0);
    return 0;
}